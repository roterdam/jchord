\section{Datarace analysis}
\label{sec:datarace}

Run the datarace analysis provided in Chord by running the following
command in Chord's {\tt main/} directory:

\begin{verbatim}
    prompt> ant -Dchord.work.dir=<...> -Dchord.run.analyses=datarace-java run
\end{verbatim}

\noindent where {\tt <...>} is the absolute path of a directory
containing a file named \code{chord.properties} which defines
properties \code{chord.main.class}, \code{chord.class.path}, and
\code{chord.src.path}.  See Section \ref{sec:chord-sysprops} for the
meaning of these properties.

Directory \code{main/examples/datarace_test/} provides a toy Java
program on which you can run the datarace analysis.  First run {\tt
  ant} in that directory (in order to compile the program's {\tt
  .java} files to {\tt .class} files) and then run the above command
in Chord's {\tt main/} directory with {\tt <...>} replaced by
\code{/.../examples/datarace_test/}.  Upon successful completion, the
following files should be produced in directory
\code{main/examples/datarace_test/chord_output/}:

\begin{itemize}
\item
File \code{dataraces_by_fld.html}, listing all dataraces grouped by
the field on which they occur; all dataraces on the same instance
field or the same static field are listed in the same group, and so
are all dataraces on array elements.
\item
File \code{dataraces_by_obj.html}, listing all dataraces grouped by
the abstract object on whose field they occur; dataraces on all static
fields are listed in the same group, and so are dataraces on different
instance fields of the same abstract object.
\end{itemize}


