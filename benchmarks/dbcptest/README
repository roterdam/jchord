To build pool, run "ant dist" in pool/.
Then move generated file pool/dist/commons-pool.jar to lib/.

To build dbcp, run "ant dist" in dbcp/.
Then move generated file dbcp/dist/commons-dbcp.jar to lib/.

Neither of the above builds is necessary as they are already built.
To run the test case, simply run "ant run" in this directory.
Output should be roughly as follows (using jdk 1.5.0_16 in
/home/parkcs/ on potus):

     [java] Setting up driver.
     [java] Done.
     [java] Creating connection.
     [java] Thread Thread[Main,5,main] got lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0 while holding lock on class java.sql.DriverManager
     [java] Thread Thread[Main,5,main] got lock on class java.sql.DriverManager while holding lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0
     [java] Thread Thread[Timer-0,5,main] got lock on class java.sql.DriverManager while holding lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0
     [java] Thread Thread[Timer-0,5,main] got lock on class java.sql.DriverManager while holding lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0
     [java] Thread Thread[Timer-0,5,main] got lock on class java.sql.DriverManager while holding lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0
     [java] Thread Thread[Timer-0,5,main] got lock on class java.sql.DriverManager while holding lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0
     [java] Thread Thread[Timer-0,5,main] got lock on class java.sql.DriverManager while holding lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0
     [java] Thread Thread[Timer-0,5,main] got lock on class java.sql.DriverManager while holding lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0
     [java] Thread Thread[Timer-0,5,main] got lock on class java.sql.DriverManager while holding lock on org.apache.commons.pool.impl.GenericObjectPool@55e859c0
     [java] Thread Thread[Conn 1,5,main] got lock on org.apache.commons.pool.impl.GenericKeyedObjectPool@3a860d49 while holding lock on PoolingConnection: org.apache.commons.pool.impl.GenericKeyedObjectPool@3a860d49
     [java] Thread Thread[Conn 2,5,main] got lock on org.apache.commons.pool.impl.GenericKeyedObjectPool@3a860d49 while holding lock on PoolingConnection: org.apache.commons.pool.impl.GenericKeyedObjectPool@3a860d49
     [java] Thread Thread[Conn 1,5,main] got lock on PoolingConnection: org.apache.commons.pool.impl.GenericKeyedObjectPool@3a860d49 while holding lock on org.apache.commons.pool.impl.GenericKeyedObjectPool@3a860d49
     [java] Thread Thread[Conn 2,5,main] got lock on PoolingConnection: org.apache.commons.pool.impl.GenericKeyedObjectPool@3a860d49 while holding lock on org.apache.commons.pool.impl.GenericKeyedObjectPool@3a860d49

There are two deadlocks:

Deadlock 1:
===========

     [java] Found one Java-level deadlock:
     [java] =============================
     [java] "Timer-0":
     [java]   waiting to lock monitor 0x00002aaaaacf9290 (object 0x00002b806f940640, a java.lang.Class),
     [java]   which is held by "Main"
     [java] "Main":
     [java]   waiting to lock monitor 0x00002aaaaacf9218 (object 0x00002b809f6736f0, a org.apache.commons.pool.impl.GenericObjectPool),
     [java]   which is held by "Timer-0"
     [java] 
     [java] Java stack information for the threads listed above:
     [java] ===================================================
     [java] "Timer-0":
     [java]     at java.sql.DriverManager.getConnection(DriverManager.java:187)
     [java]     - waiting to lock <0x00002b806f940640> (a java.lang.Class)
     [java]     at org.apache.commons.dbcp.DriverManagerConnectionFactory.createConnection(DriverManagerConnectionFactory.java:46)
     [java]     at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:294)
     [java]     - locked <0x00002b809f689fb8> (a org.apache.commons.dbcp.PoolableConnectionFactory)
     [java]     at org.apache.commons.pool.impl.GenericObjectPool.addObject(GenericObjectPool.java:1065)
     [java]     - locked <0x00002b809f6736f0> (a org.apache.commons.pool.impl.GenericObjectPool)
     [java]     at org.apache.commons.pool.impl.GenericObjectPool.ensureMinIdle(GenericObjectPool.java:1046)
     [java]     at org.apache.commons.pool.impl.GenericObjectPool.access$100(GenericObjectPool.java:128)
     [java]     at org.apache.commons.pool.impl.GenericObjectPool$Evictor.run(GenericObjectPool.java:1123)
     [java]     at java.util.TimerThread.mainLoop(Timer.java:512)
     [java]     at java.util.TimerThread.run(Timer.java:462)
     [java] "Main":
     [java]     at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:781)
     [java]     - waiting to lock <0x00002b809f6736f0> (a org.apache.commons.pool.impl.GenericObjectPool)
     [java]     at org.apache.commons.dbcp.PoolingDriver.connect(PoolingDriver.java:175)
     [java]     at java.sql.DriverManager.getConnection(DriverManager.java:525)
     [java]     - locked <0x00002b806f940640> (a java.lang.Class)
     [java]     at java.sql.DriverManager.getConnection(DriverManager.java:193)
     [java]     - locked <0x00002b806f940640> (a java.lang.Class)
     [java]     at MainThread.run(DBCPHarness.java:57)

Deadlock 2 (see http://issues.apache.org/jira/browse/DBCP-202):
===========

     [java] Found one Java-level deadlock:
     [java] =============================
     [java] "Conn 2":
     [java]   waiting to lock monitor 0x00002aaaaabcc470 (object 0x00002aaffd247dd8, a org.apache.commons.dbcp.PoolingConnection),
     [java]   which is held by "Conn 1"
     [java] "Conn 1":
     [java]   waiting to lock monitor 0x00002aaaaabcc3f8 (object 0x00002aaffd235ea8, a org.apache.commons.pool.impl.GenericKeyedObjectPool),
     [java]   which is held by "Conn 2"
     [java] 
     [java] Java stack information for the threads listed above:
     [java] ===================================================
     [java] "Conn 2":
     [java]     at org.apache.commons.dbcp.AbandonedTrace.removeTrace(AbandonedTrace.java:221)
     [java]     - waiting to lock <0x00002aaffd247dd8> (a org.apache.commons.dbcp.PoolingConnection)
     [java]     at org.apache.commons.dbcp.PoolablePreparedStatement.passivate(PoolablePreparedStatement.java:104)
     [java]     at org.apache.commons.dbcp.PoolingConnection.passivateObject(PoolingConnection.java:239)
     [java]     at org.apache.commons.pool.impl.GenericKeyedObjectPool.returnObject(GenericKeyedObjectPool.java:974)
     [java]     - locked <0x00002aaffd235ea8> (a org.apache.commons.pool.impl.GenericKeyedObjectPool)
     [java]     at org.apache.commons.dbcp.PoolablePreparedStatement.close(PoolablePreparedStatement.java:78)
     [java]     at org.apache.commons.dbcp.DelegatingStatement.close(DelegatingStatement.java:165)
     [java]     at ConnThread.run(DBCPHarness.java:92)
     [java] "Conn 1":
     [java]     at org.apache.commons.pool.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:767)
     [java]     - waiting to lock <0x00002aaffd235ea8> (a org.apache.commons.pool.impl.GenericKeyedObjectPool)
     [java]     at org.apache.commons.dbcp.PoolingConnection.prepareStatement(PoolingConnection.java:87)
     [java]     - locked <0x00002aaffd247dd8> (a org.apache.commons.dbcp.PoolingConnection)
     [java]     at org.apache.commons.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:185)
     [java]     at org.apache.commons.dbcp.PoolingDriver$PoolGuardConnectionWrapper.prepareStatement(PoolingDriver.java:338)
     [java]     at ConnThread.run(DBCPHarness.java:91)
